<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXAWEAR | ARCHIVE SYSTEM 2026</title>
    <script src="https://js.stripe.com/v3/"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Inter:wght@200;400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #ff0000; --bg: #050505; --surface: rgba(255, 255, 255, 0.03); --border: rgba(255, 255, 255, 0.1); --text: #ffffff; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background-color: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; overflow-x: hidden; scroll-behavior: smooth; }
        nav { position: fixed; width: 100%; padding: 25px 5%; display: flex; justify-content: space-between; align-items: center; z-index: 2000; background: rgba(5, 5, 5, 0.8); border-bottom: 1px solid var(--border); backdrop-filter: blur(20px); }
        .logo { font-family: 'Syncopate', sans-serif; font-size: 18px; font-weight: 700; letter-spacing: 8px; text-decoration: none; color: white; }
        .logo span { color: var(--primary); }
        .nav-links { display: flex; gap: 30px; align-items: center; }
        .nav-links a { color: white; text-decoration: none; font-size: 10px; letter-spacing: 2px; transition: 0.3s; }
        .page-section { display: none; padding-top: 120px; min-height: 100vh; animation: pageFade 0.6s ease; }
        .page-section.active { display: block; }
        @keyframes pageFade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .hero { text-align: center; padding: 60px 20px; }
        .timer-container { display: flex; justify-content: center; gap: 20px; margin: 50px 0; }
        .t-box { background: var(--surface); border: 1px solid var(--border); padding: 25px; min-width: 120px; }
        .t-box span { display: block; font-size: 40px; font-family: 'Syncopate'; color: var(--primary); }
        .t-box label { font-size: 10px; letter-spacing: 2px; opacity: 0.5; }
        .auth-card { max-width: 450px; margin: 40px auto; background: var(--surface); border: 1px solid var(--border); padding: 40px; }
        .auth-tabs { display: flex; margin-bottom: 30px; border-bottom: 1px solid var(--border); }
        .auth-tab { flex: 1; padding: 15px; text-align: center; cursor: pointer; font-size: 10px; font-family: 'Syncopate'; opacity: 0.5; }
        .auth-tab.active { opacity: 1; border-bottom: 2px solid var(--primary); }
        .shop-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 40px; padding: 0 5%; }
        .product-card { background: var(--surface); border: 1px solid var(--border); padding: 30px; text-align: center; transition: 0.4s; }
        .stock-live { font-size: 10px; font-weight: 900; color: var(--primary); margin-bottom: 15px; display: block; }
        .checkout-container { display: grid; grid-template-columns: 1fr 400px; gap: 40px; max-width: 1300px; margin: 0 auto; padding: 0 20px; }
        .checkout-form-section { background: var(--surface); border: 1px solid var(--border); padding: 30px; margin-bottom: 25px; }
        .cart-item { display: flex; gap: 20px; padding: 20px 0; border-bottom: 1px solid var(--border); align-items: center; }
        .cart-item img { width: 70px; height: 90px; object-fit: cover; }
        .cart-summary { background: #fff; color: #000; padding: 40px; height: fit-content; position: sticky; top: 120px; }
        input { width: 100%; padding: 18px; background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: white; margin-bottom: 15px; outline: none; }
        .btn-nexa { width: 100%; padding: 20px; background: none; border: 1px solid #fff; color: #fff; font-family: 'Syncopate'; font-size: 11px; letter-spacing: 3px; cursor: pointer; transition: 0.4s; }
        .btn-nexa:hover { background: #fff; color: #000; }
        .pay-methods { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 15px; }
        .pay-btn { border: 1px solid var(--border); padding: 15px; text-align: center; cursor: pointer; font-size: 10px; opacity: 0.5; }
        .pay-btn.active { border-color: var(--primary); opacity: 1; background: rgba(255,0,0,0.1); }
        footer { padding: 60px; text-align: center; font-size: 9px; opacity: 0.3; letter-spacing: 5px; }
    </style>
</head>
<body>
    <nav>
        <a href="#" class="logo" onclick="showPage('home')">NEXA<span>WEAR</span></a>
        <div class="nav-links">
            <a href="#" onclick="showPage('shop')">KOLEKCJA</a>
            <a href="#" onclick="showPage('checkout')">KOSZYK (<span id="cart-count">0</span>)</a>
            <a href="#" onclick="showPage('auth')"><i class="fas fa-user"></i></a>
        </div>
    </nav>

    <section id="home" class="page-section active">
        <div class="hero">
            <p style="letter-spacing: 12px; font-size: 12px; margin-bottom: 20px;">ARCHIVE SYSTEM 2026</p>
            <h1 style="font-family:'Syncopate'; font-size: 5vw; letter-spacing: 10px;">DROP_01 LIVE</h1>
            <div class="timer-container">
                <div class="t-box"><span id="days">00</span><label>DNI</label></div>
                <div class="t-box"><span id="hours">00</span><label>GODZ</label></div>
                <div class="t-box"><span id="mins">00</span><label>MIN</label></div>
                <div class="t-box"><span id="secs">00</span><label>SEK</label></div>
            </div>
            <button class="btn-nexa" style="max-width: 350px;" onclick="showPage('shop')">EKSPLORUJ ARCHIWUM</button>
        </div>
    </section>

    <section id="auth" class="page-section">
        <div class="auth-card">
            <div class="auth-tabs">
                <div id="tab-login" class="auth-tab active" onclick="switchAuth('login')">LOGOWANIE</div>
                <div id="tab-reg" class="auth-tab" onclick="switchAuth('reg')">REJESTRACJA</div>
            </div>
            <div id="login-form">
                <input type="email" placeholder="E-MAIL">
                <input type="password" placeholder="HASŁO">
                <button class="btn-nexa" onclick="mockLogin()">ZALOGUJ SYSTEM</button>
            </div>
            <div id="reg-form" style="display:none">
                <input type="text" placeholder="IMIĘ I NAZWISKO">
                <input type="email" placeholder="E-MAIL">
                <input type="password" placeholder="HASŁO">
                <button class="btn-nexa" onclick="mockLogin()">UTWÓRZ PROFIL</button>
            </div>
        </div>
    </section>

    <section id="shop" class="page-section">
        <div class="shop-grid">
            <div class="product-card">
                <span class="stock-live" id="stock-1">ZOSTAŁO: 10 SZTUK</span>
                <img src="szerokie czerwone.jpg" style="width:100%">
                <h2 style="font-family:'Syncopate'; font-size:12px; margin:20px 0;">VERVE FLARE / BLACK-RED</h2>
                <p style="font-weight:900; margin-bottom:20px;">179.99 PLN</p>
                <button class="btn-nexa" onclick="addToCart('Verve Flare / Black-Red', 179.99, 'szerokie czerwone.jpg')">DODAJ DO TORBY</button>
            </div>
            <div class="product-card">
                <span class="stock-live" id="stock-2">ZOSTAŁO: 10 SZTUK</span>
                <img src="szerokie białe.jpg" style="width:100%">
                <h2 style="font-family:'Syncopate'; font-size:12px; margin:20px 0;">VERVE FLARE / ACID WHITE</h2>
                <p style="font-weight:900; margin-bottom:20px;">179.99 PLN</p>
                <button class="btn-nexa" onclick="addToCart('Verve Flare / Acid White', 179.99, 'szerokie białe.jpg')">DODAJ DO TORBY</button>
            </div>
        </div>
    </section>

    <section id="checkout" class="page-section">
        <div class="checkout-container">
            <div>
                <div class="checkout-form-section">
                    <h3>01. DANE DOSTAWY</h3>
                    <input type="text" id="cust-name" placeholder="IMIĘ I NAZWISKO">
                    <input type="tel" placeholder="NUMER TELEFONU">
                    <input type="text" id="cust-inpost" placeholder="KOD PACZKOMATU INPOST (NP. KRA01M)">
                </div>
                <div class="checkout-form-section">
                    <h3>02. METODA PŁATNOŚCI</h3>
                    <div class="pay-methods">
                        <div class="pay-btn" onclick="setPay(this)">BLIK</div>
                        <div class="pay-btn" onclick="setPay(this)">KARTA</div>
                        <div class="pay-btn" onclick="setPay(this)">PRZELEW</div>
                    </div>
                </div>
            </div>
            <div class="cart-summary">
                <h2 style="font-family:'Syncopate'; font-size:14px; border-bottom:2px solid #000; padding-bottom:15px; margin-bottom:20px;">PODSUMOWANIE</h2>
                <div id="cart-items-list"></div>
                <div style="margin-top:30px; font-size:13px; font-weight:700;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                        <span>WARTOŚĆ:</span><span id="sum-base">0 PLN</span>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-size:22px; border-top:2px solid #000; padding-top:15px; margin-top:15px;">
                        <span>SUMA:</span><span id="sum-total">0 PLN</span>
                    </div>
                </div>
                <button class="btn-nexa" style="background:#000; color:#fff; border:none; margin-top:30px;" onclick="finishOrder()">SFINALIZUJ ZAMÓWIENIE</button>
            </div>
        </div>
    </section>

    <footer>NEXAWEAR // DIGITAL ARCHIVE 2026</footer>

    <script>
        const stripe = Stripe('pk_test_51RVccZQjNQmqXkk9cs2qbZYAFLMibDEqVVHi3EuYSF5ISF2w4omEKPGTPjwoBW6qr8nYvGod5w7lRgUUqmj1jw1900NDBmGrjY');
        let cart = []; let isLogged = false; let s1 = 18; let s2 = 7;

        function showPage(id) {
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0,0);
        }

        function addToCart(name, price, img) {
            cart.push({id: Date.now(), name, price, img});
            updateCart();
            alert("Dodano do torby.");
        }

        function updateCart() {
            document.getElementById('cart-count').innerText = cart.length;
            const list = document.getElementById('cart-items-list');
            list.innerHTML = cart.map(i => `<div class="cart-item"><img src="${i.img}"><div style="flex:1"><h4 style="font-size:10px;">${i.name}</h4><p>${i.price} PLN</p></div><i class="fas fa-trash" onclick="remove(${i.id})"></i></div>`).join('');
            let total = cart.reduce((s, i) => s + i.price, 0);
            document.getElementById('sum-base').innerText = total + " PLN";
            document.getElementById('sum-total').innerText = total + " PLN";
        }

        function remove(id) { cart = cart.filter(i => i.id !== id); updateCart(); }
        function setPay(el) { document.querySelectorAll('.pay-btn').forEach(b => b.classList.remove('active')); el.classList.add('active'); }
        function switchAuth(type) { document.getElementById('login-form').style.display = type === 'login' ? 'block' : 'none'; document.getElementById('reg-form').style.display = type === 'reg' ? 'block' : 'none'; }
        function mockLogin() { isLogged = true; alert("Zalogowano!"); showPage('shop'); }

        async function finishOrder() {
            if(!isLogged) return showPage('auth');
            if(cart.length === 0) return alert("Koszyk jest pusty");
            if(!document.getElementById('cust-name').value) return alert("Podaj dane!");

            try {
                // KLUCZOWE: Pełny adres URL do serwera
                const response = await fetch('http://localhost:4242/create-checkout-session', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ items: cart, discountActive: false })
                });

                const session = await response.json();
                if (session.error) throw new Error(session.error);

                const result = await stripe.redirectToCheckout({ sessionId: session.id });
                if (result.error) alert(result.error.message);
            } catch (error) {
                console.error("Błąd:", error);
                alert("Błąd połączenia z bramką. Upewnij się, że serwer Node.js działa!");
            }
        }

        // Timer Logic
        const target = new Date("April 22, 2026 00:00:00").getTime();
        setInterval(() => {
            const now = new Date().getTime();
            const diff = target - now;
            document.getElementById('days').innerText = Math.floor(diff / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
            document.getElementById('hours').innerText = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
            document.getElementById('mins').innerText = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
            document.getElementById('secs').innerText = Math.floor((diff % (1000 * 60)) / 1000).toString().padStart(2, '0');
        }, 1000);
    </script>
</body>
</html>